{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Rerousel = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar typestyle_1 = require(\"typestyle\");\n\nvar wrapper = typestyle_1.style({\n  display: 'flex',\n  alignItems: 'center',\n  overflowX: 'scroll',\n  height: '100%',\n  scrollSnapType: 'x mandatory',\n  '-webkit-overflow-scrolling': 'touch',\n  flexFlow: 'row nowrap',\n  '-ms-overflow-style': 'none',\n  scrollbarWidth: 'none',\n  $nest: {\n    '& > *': {\n      boxSizing: 'border-box',\n      flexShrink: 0\n    },\n    '&::-webkit-scrollbar': {\n      display: 'none'\n    }\n  }\n});\n\nvar Rerousel = function (_a) {\n  var children = _a.children,\n      itemRef = _a.itemRef,\n      _b = _a.interval,\n      interval = _b === void 0 ? 3000 : _b,\n      _c = _a.stop,\n      stop = _c === void 0 ? false : _c;\n  var itemWidth = useWidth(itemRef)[0];\n\n  var _d = react_1.useState(),\n      setScrollInterval = _d[1];\n\n  var _e = react_1.useState(0),\n      currentScrollLeft = _e[0],\n      setCurrentScrollLeft = _e[1];\n\n  var wrapperRef = react_1.useRef(null);\n  var cc = react_1.Children.count(children);\n\n  function useWidth(elementRef) {\n    var _a = react_1.useState(0),\n        width = _a[0],\n        setWidth = _a[1];\n\n    var updateWidth = react_1.useCallback(function () {\n      if (elementRef && elementRef.current) {\n        var width_1 = elementRef.current.getBoundingClientRect().width;\n        setWidth(width_1);\n      }\n    }, [elementRef]);\n    var firstUpdateWidth = react_1.useCallback(function () {\n      if (elementRef && elementRef.current) {\n        var width_2 = elementRef.current.getBoundingClientRect().width;\n        width_2 = width_2 - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-left-width')) - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('border-right-width'));\n        width_2 = width_2 - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-left')) - parseInt(window.getComputedStyle(elementRef.current).getPropertyValue('padding-right'));\n        setWidth(width_2);\n      }\n    }, [elementRef]);\n    react_1.useEffect(function () {\n      firstUpdateWidth();\n      window.addEventListener('resize', updateWidth);\n      return function () {\n        window.removeEventListener('resize', updateWidth);\n      };\n    }, [updateWidth]);\n    return [width];\n  }\n\n  react_1.useEffect(function () {\n    var _a, _b;\n\n    if (currentScrollLeft === 0) {\n      (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.scrollTo({\n        left: 0\n      });\n      setCurrentScrollLeft(1);\n      return;\n    }\n\n    if (currentScrollLeft > cc) {\n      setCurrentScrollLeft(0);\n      return;\n    }\n\n    if (itemWidth != undefined) {\n      (_b = wrapperRef.current) === null || _b === void 0 ? void 0 : _b.scrollTo({\n        left: itemWidth * currentScrollLeft,\n        behavior: 'smooth'\n      });\n    }\n  }, [currentScrollLeft, itemWidth]);\n  react_1.useEffect(function () {\n    if (!stop) {\n      var i = setInterval(function () {\n        setCurrentScrollLeft(function (csl) {\n          return csl + 1;\n        });\n      }, interval);\n      setScrollInterval(i);\n    }\n\n    return function () {\n      setScrollInterval(function (i) {\n        if (i) {\n          clearInterval(i);\n        }\n\n        return undefined;\n      });\n    };\n  }, [itemWidth, interval, stop]);\n  return react_1.default.createElement(\"div\", {\n    className: wrapper,\n    ref: wrapperRef\n  }, children, children);\n};\n\nexports.Rerousel = Rerousel;","map":{"version":3,"mappings":"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","names":["wrapper","typestyle_1","display","alignItems","overflowX","height","scrollSnapType","flexFlow","scrollbarWidth","$nest","boxSizing","flexShrink","Rerousel","_a","children","itemRef","_b","interval","_c","stop","useWidth","react_1","setScrollInterval","currentScrollLeft","setCurrentScrollLeft","wrapperRef","cc","count","elementRef","width","setWidth","updateWidth","current","getBoundingClientRect","width_1","firstUpdateWidth","width_2","parseInt","window","getComputedStyle","getPropertyValue","addEventListener","removeEventListener","scrollTo","left","itemWidth","undefined","behavior","i","setInterval","csl","clearInterval","className","ref","exports"],"sources":["../src/index.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}